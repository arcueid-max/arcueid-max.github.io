<body>
  <!-- å¯¼èˆªæ  -->
  <div id="navbar"></div>

  <!-- ä¸»ä½“ -->
  <div class="container">
    <h2>æ¬¢è¿æ¥åˆ°ç­”è€Œæœ‰æ® ğŸ‰</h2>
    <p>è¿™æ˜¯æˆ‘ä»¬çš„ RAG çŸ¥è¯†å¢å¼ºé—®ç­”å­¦ä¹ å¹³å°ã€‚</p>

    <!-- æˆæœå±•ç¤ºåŒºå— -->
    <div class="highlight">
      <h3>âœ¨ ç«‹å³ä½“éªŒæˆ‘ä»¬çš„æˆæœ</h3>
      <p>è¾“å…¥ä½ çš„é—®é¢˜ï¼Œé©¬ä¸Šè·å¾—æ™ºèƒ½å›ç­”ï¼š</p>

      <input id="question" type="text" placeholder="è¯·è¾“å…¥ä½ çš„é—®é¢˜..." />
      <button onclick="ask()">æäº¤ ğŸš€</button>
      <pre id="answer"></pre>
    </div>
  </div>

  <!-- é¡µè„š -->
  <div id="footer"></div>

  <!-- åŠ¨æ€åŠ è½½å¯¼èˆª & é¡µè„š -->
  <script>
    fetch("navbar.html")
      .then(r => r.text())
      .then(d => document.getElementById("navbar").innerHTML = d);

    fetch("footer.html")
      .then(r => r.text())
      .then(d => document.getElementById("footer").innerHTML = d);

    // ========= é…ç½®åŒº =========
    const apiEnabled = false; // ğŸš§ å¼€å‘é˜¶æ®µ = falseï¼Œä¸Šçº¿åæ”¹ä¸º true
    const apiURL = "https://ä½ çš„åç«¯åœ°å€/ask"; // âœ… ä¸Šçº¿åæ›¿æ¢æˆä½ ä»¬çš„ API åœ°å€
    // ========================

    async function ask() {
      const q = document.getElementById("question").value.trim();
      if (!q) {
        document.getElementById("answer").textContent = "âš ï¸ è¯·è¾“å…¥ä¸€ä¸ªé—®é¢˜";
        return;
      }

      document.getElementById("answer").textContent = "ğŸ¤” æ­£åœ¨æ€è€ƒä¸­...";

      if (apiEnabled) {
        try {
          let res = await fetch(apiURL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ question: q })
          });
          let data = await res.json();
          document.getElementById("answer").textContent = "âœ… å›ç­”ï¼š" + data.answer;
        } catch (err) {
          document.getElementById("answer").textContent = "âŒ è°ƒç”¨åç«¯å¤±è´¥ï¼Œè¯·ç¨åå†è¯•";
        }
      } else {
        // æœ¬åœ°æ¨¡æ‹Ÿå›ç­”
        document.getElementById("answer").textContent = 
          "ğŸ› ï¸ æ¨¡æ‹Ÿå›ç­”ï¼šä½ é—®äº†ã€Œ" + q + "ã€ï¼Œ" +
          "å½“å‰æ¼”ç¤ºç‰ˆæœªè¿æ¥åç«¯ï¼Œæ•¬è¯·æœŸå¾…æ­£å¼ä¸Šçº¿ï¼";
      }
    }
  </script>
</body>

<style>
  .highlight {
    margin: 40px auto;
    padding: 30px;
    max-width: 700px;
    text-align: center;
    background: linear-gradient(135deg, #007bff, #00c6ff);
    color: #fff;
    border-radius: 16px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .highlight h3 {
    margin-bottom: 15px;
    font-size: 22px;
  }
  .highlight p {
    margin-bottom: 20px;
    font-size: 16px;
  }
  input {
    width: 70%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    margin-bottom: 12px;
  }
  button {
    padding: 12px 24px;
    background: #fff;
    color: #007bff;
    font-weight: bold;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    transition: 0.3s;
  }
  button:hover {
    background: #f0f0f0;
  }
  pre {
    text-align: left;
    margin-top: 20px;
    background: rgba(255,255,255,0.15);
    padding: 12px;
    border-radius: 8px;
    white-space: pre-wrap;
  }
</style>
